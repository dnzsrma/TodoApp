(()=>{"use strict";let e=JSON.parse(localStorage.getItem("allprojects")||"[]"),t=JSON.parse(localStorage.getItem("id")||"0"),o=e[0];function d(){let e=o.Id+"todos";JSON.parse(localStorage.getItem(e))&&(o.arrayOfTodos=JSON.parse(localStorage.getItem(e))),console.log(o)}class n{constructor(e,t){this.Id=e,this.Title=t,this.arrayOfTodos=[]}}class l{constructor(e,t,o,d,n){this.title=e,this.description=t,this.dueDate=o,this.priority=d,this.parentProject=n}}function i(e){let t=Array.from(document.getElementsByClassName("close-popup"));for(let o=0;o<t.length;o++)t[o].addEventListener("click",(function(){document.getElementById(e).classList.remove("visible"),document.getElementById(e).classList.add("invisible")}))}function s(e){document.getElementById(e).classList.remove("invisible"),document.getElementById(e).classList.add("visible")}function r(e,t,o,d){let n=Array.from(document.getElementsByClassName("detail-item"));for(let e=0;e<n.length;e++)n[e].innerHTML="";let l=document.createElement("h2");l.setAttribute("class","detail-item");let i=document.createElement("h2");i.setAttribute("class","detail-item");let s=document.createElement("h2");s.setAttribute("class","detail-item");let r=document.createElement("h2");r.setAttribute("class","detail-item"),l.innerHTML=e,i.innerHTML=t,s.innerHTML=o,r.innerHTML=d,document.getElementById("details-popup").appendChild(l),document.getElementById("details-popup").appendChild(i),document.getElementById("details-popup").appendChild(s),document.getElementById("details-popup").appendChild(r)}function a(e){let t=document.getElementById("display");for(;t.firstChild;)t.removeChild(t.firstChild);for(let n=0;n<e.length;n++){let l=document.createElement("div");l.setAttribute("class","project-item"),l.addEventListener("click",(function(){o=e[n],console.log(o),d(),c(o.arrayOfTodos)})),l.innerHTML=e[n].Title,t.appendChild(l)}console.log("ui for projects created.")}function c(e){let t=document.getElementById("todo-display");for(;t.firstChild;)t.removeChild(t.firstChild);for(let o=0;o<e.length;o++){let d=document.createElement("div");d.setAttribute("class","todo-item"),d.addEventListener("click",(function(){s("details-popup"),r(e[o].title,e[o].description,e[o].dueDate,e[o].priority)})),d.innerHTML=e[o].title,t.appendChild(d)}console.log("ui for todos created.")}window.onload=d=>{document.getElementById("newProjectPopup").addEventListener("submit",(function(){t+=1;let d=document.forms.projectForm.title.value,l=new n(t,d,[]);e.push(l),o=l,localStorage.setItem("allprojects",JSON.stringify(e)),localStorage.setItem("id",JSON.stringify(t)),a(e)})),document.getElementById("newTodoPopup").addEventListener("submit",(function(){let e=document.forms.TodoForm["todo-name"].value,t=document.forms.TodoForm["todo-description"].value,d=document.forms.TodoForm["due-date"].value,n=document.forms.TodoForm.priority.value,i=new l(e,t,d,n,o.Id);o.arrayOfTodos.push(i);let s=o.Id+"todos";localStorage.setItem(s,JSON.stringify(o.arrayOfTodos)),c(o.arrayOfTodos)})),document.getElementById("newProject").addEventListener("click",(function(){s("add-project-popup"),i("add-project-popup")})),document.getElementById("newTodo").addEventListener("click",(function(){s("add-todo-popup"),i("add-todo-popup")})),i("details-popup"),a(e),c(o.arrayOfTodos)}})();